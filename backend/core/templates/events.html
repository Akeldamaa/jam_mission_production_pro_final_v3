{% extends 'base.html' %}
{% block title %}Events - JAM Mission{% endblock %}
{% block content %}
<section class="section">
    <h1 class="section-title text-center">Upcoming Events</h1>
    {% if user.is_authenticated %}
        {% if user.is_superuser or user|has_group:'owner' or user|has_group:'technical_admin' %}
            <div class="text-right mb-4">
                <a href="{% url 'event_create' %}" class="btn-primary">New Event</a>
            </div>
        {% endif %}
    {% endif %}
    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3">
        {% for event in events %}
            <a href="{% url 'event_detail' event.slug %}" class="card" style="text-decoration: none; color: inherit;">
                {% if event.image %}
                    <img src="{{ event.image.url }}" alt="{{ event.title }}">
                {% endif %}
                <div class="card-content">
                    <h2 class="card-title">{{ event.title }}</h2>
                    <p>{{ event.short_tagline|default:event.description|truncatechars:120 }}</p>
                    <p class="mt-2 text-sm">{{ event.start_date }}{% if event.end_date %} – {{ event.end_date }}{% endif %}</p>
                    <p class="mt-1 font-semibold">${{ event.price }} • {{ event.available_tickets }} / {{ event.capacity }} tickets left</p>
                </div>
            </a>
        {% empty %}
            <p>No events available at this time.</p>
        {% endfor %}
    </div>
</section>
{% endblock %}